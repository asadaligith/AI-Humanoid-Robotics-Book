"use strict";(self.webpackChunkai_humanoid_robotics_book=self.webpackChunkai_humanoid_robotics_book||[]).push([[735],{856:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"modules/module-05-capstone/testing-methodology","title":"Testing Methodology","description":"Overview","source":"@site/docs/modules/module-05-capstone/testing-methodology.md","sourceDirName":"modules/module-05-capstone","slug":"/modules/module-05-capstone/testing-methodology","permalink":"/docs/modules/module-05-capstone/testing-methodology","draft":false,"unlisted":false,"editUrl":"https://github.com/asadaligith/AI-Humanoid-Robotics-Book/tree/main/docs/modules/module-05-capstone/testing-methodology.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"6\ufe0f\u20e3 Jetson Hardware Deployment","permalink":"/docs/modules/module-05-capstone/chapter-06-jetson-deployment"},"next":{"title":"Performance Benchmarking","permalink":"/docs/modules/module-05-capstone/benchmarking"}}');var s=t(4848),r=t(8453);const c={sidebar_position:7},o="Testing Methodology",a={},l=[{value:"Overview",id:"overview",level:2},{value:"Why Test Capabilities in Isolation?",id:"why-test-capabilities-in-isolation",level:2},{value:"Capability 1: Voice Input",id:"capability-1-voice-input",level:2},{value:"Acceptance Criteria",id:"acceptance-criteria",level:3},{value:"Test Procedure",id:"test-procedure",level:3},{value:"Mock Mode for Integration Testing",id:"mock-mode-for-integration-testing",level:3},{value:"Capability 2: LLM Planning",id:"capability-2-llm-planning",level:2},{value:"Acceptance Criteria",id:"acceptance-criteria-1",level:3},{value:"Test Procedure",id:"test-procedure-1",level:3},{value:"Mock Mode",id:"mock-mode",level:3},{value:"Capability 3: Navigation",id:"capability-3-navigation",level:2},{value:"Acceptance Criteria",id:"acceptance-criteria-2",level:3},{value:"Test Procedure",id:"test-procedure-2",level:3},{value:"Mock Mode",id:"mock-mode-1",level:3},{value:"Capability 4: Object Detection",id:"capability-4-object-detection",level:2},{value:"Acceptance Criteria",id:"acceptance-criteria-3",level:3},{value:"Test Procedure",id:"test-procedure-3",level:3},{value:"Mock Mode",id:"mock-mode-2",level:3},{value:"Capability 5: Manipulation",id:"capability-5-manipulation",level:2},{value:"Acceptance Criteria",id:"acceptance-criteria-4",level:3},{value:"Test Procedure",id:"test-procedure-4",level:3},{value:"Mock Mode",id:"mock-mode-3",level:3},{value:"Full Integration Testing",id:"full-integration-testing",level:2},{value:"Mock Mode Architecture Benefits",id:"mock-mode-architecture-benefits",level:2},{value:"Troubleshooting Isolation Tests",id:"troubleshooting-isolation-tests",level:2},{value:"Common Testing Pitfalls and Best Practices",id:"common-testing-pitfalls-and-best-practices",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"testing-methodology",children:"Testing Methodology"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["This guide documents how to test each of the five capstone capabilities ",(0,s.jsx)(n.strong,{children:"independently"})," before attempting full integration. Independent testing isolates failures, accelerates debugging, and validates acceptance criteria (voice: 85% accuracy, navigation: <10% failure, detection: correct bounding boxes, manipulation: 70% success)."]}),"\n",(0,s.jsx)(n.h2,{id:"why-test-capabilities-in-isolation",children:"Why Test Capabilities in Isolation?"}),"\n",(0,s.jsx)(n.p,{children:'Debugging a failed end-to-end task ("fetch the mug from the kitchen") is difficult when failures could originate from any of five subsystems:'}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Voice transcription"}),' misheard command ("fetch the bug")']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LLM planning"})," generated invalid action sequence"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Navigation"})," failed to reach kitchen due to obstacle"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Perception"})," detected wrong object (cup instead of mug)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Manipulation"})," grasp failed due to unreachable pose"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Isolation testing"})," decouples these dependencies, enabling you to verify each capability meets its acceptance criteria independently."]}),"\n",(0,s.jsx)(n.h2,{id:"capability-1-voice-input",children:"Capability 1: Voice Input"}),"\n",(0,s.jsx)(n.h3,{id:"acceptance-criteria",children:"Acceptance Criteria"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accuracy"}),": \u226585% word error rate (WER) on capstone command set"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Latency"}),": <5 seconds per 3-second audio clip"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Coverage"}),": Handles all 20 test commands correctly"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-procedure",children:"Test Procedure"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Create Test Audio Dataset"})}),"\n",(0,s.jsx)(n.p,{children:"Record 20 voice commands (or use text-to-speech):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test commands (save as test_commands.txt)\r\nBring me the mug from the kitchen\r\nNavigate to the living room\r\nPick up the red bottle\r\nPlace the cup on the table\r\nFind the apple in the kitchen\r\nDetect objects on the counter\r\nGo to the charging station\r\nDeliver the book to the bedroom\r\n...\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Run Voice Node in Isolation"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Start voice input node\r\nros2 run capstone_demo voice_input_node\r\n\r\n# Terminal 2: Monitor transcriptions\r\nros2 topic echo /voice/transcribed_text\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Play Test Audio and Validate"})}),"\n",(0,s.jsx)(n.p,{children:"For each test command:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Play audio clip (or speak into microphone)"}),"\n",(0,s.jsx)(n.li,{children:"Record transcribed output"}),"\n",(0,s.jsx)(n.li,{children:"Compare to ground truth using WER:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Calculate Word Error Rate (WER)\r\nfrom jiwer import wer\r\n\r\nground_truth = "Bring me the mug from the kitchen"\r\nhypothesis = "Bring me the bug from the kitchen"  # Transcription\r\nerror_rate = wer(ground_truth, hypothesis)  # 0.167 (1 out of 6 words wrong)\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Pass/Fail Criteria"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": Average WER \u2264 15% (\u226585% accuracy) across 20 commands"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": 95th percentile latency < 5 seconds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FAIL"}),': If any critical word misrecognized (e.g., "navigate" \u2192 "activate")']}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mock-mode-for-integration-testing",children:"Mock Mode for Integration Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# integration_demo.py - bypass voice with hardcoded commands\r\nMOCK_VOICE = True\r\nif MOCK_VOICE:\r\n    transcribed_text = "Bring me the mug from the kitchen"  # Hardcoded\r\nelse:\r\n    transcribed_text = self.voice_result  # From real voice node\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"capability-2-llm-planning",children:"Capability 2: LLM Planning"}),"\n",(0,s.jsx)(n.h3,{id:"acceptance-criteria-1",children:"Acceptance Criteria"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validity"}),": 100% of generated plans pass JSON schema validation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Correctness"}),": \u226590% of plans semantically match command intent"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Latency"}),": <10 seconds per planning request (API call)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-procedure-1",children:"Test Procedure"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Create Test Command Set"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'test_commands = [\r\n    "Bring me the mug from the kitchen",\r\n    "Navigate to the bedroom",\r\n    "Pick up the red apple and place it on the table",\r\n    "Detect objects in the living room",\r\n    ...\r\n]\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Run LLM Node in Isolation"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Start LLM planner\r\nros2 run capstone_demo llm_planner_node\r\n\r\n# Terminal 2: Publish test commands\r\nros2 topic pub /voice/transcribed_text std_msgs/String \\\r\n  \"{data: 'Bring me the mug from the kitchen'}\"\r\n\r\n# Terminal 3: Monitor generated plans\r\nros2 topic echo /llm/action_sequence\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Validate Output Schema"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import jsonschema\r\n\r\n# Expected schema (from llm-prompts.md contract)\r\nschema = {\r\n    "type": "object",\r\n    "properties": {\r\n        "actions": {"type": "array"},\r\n        "confidence": {"type": "number", "minimum": 0, "maximum": 1}\r\n    },\r\n    "required": ["actions", "confidence"]\r\n}\r\n\r\n# Validate LLM output\r\ntry:\r\n    jsonschema.validate(instance=llm_output, schema=schema)\r\n    print("\u2713 Schema validation passed")\r\nexcept jsonschema.ValidationError as e:\r\n    print(f"\u2717 Schema validation failed: {e.message}")\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Semantic Correctness Check"})}),"\n",(0,s.jsx)(n.p,{children:"Manually review each generated plan:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Command"}),(0,s.jsx)(n.th,{children:"Generated Plan"}),(0,s.jsx)(n.th,{children:"Correct?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:'"Bring me the mug"'}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'["navigate_to kitchen", "detect_object mug", "pick_object mug", "navigate_to user", "place_object table"]'})}),(0,s.jsx)(n.td,{children:"\u2713 YES"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:'"Go to bedroom"'}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'["navigate_to bedroom"]'})}),(0,s.jsx)(n.td,{children:"\u2713 YES"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:'"Get the apple"'}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'["navigate_to kitchen", "detect_object banana", ...]'})}),(0,s.jsx)(n.td,{children:"\u2717 NO (wrong object)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"5. Pass/Fail Criteria"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": 100% schema validation success"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": \u226590% semantic correctness (18 out of 20 plans correct)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FAIL"}),": Any hallucinated actions not in capability manifest"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mock-mode",children:"Mock Mode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'MOCK_LLM = True\r\nif MOCK_LLM:\r\n    action_sequence = [\r\n        {"action": "navigate_to", "params": {"location": "kitchen"}},\r\n        {"action": "detect_object", "params": {"name": "mug"}},\r\n        ...\r\n    ]\r\nelse:\r\n    action_sequence = self.llm_result\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"capability-3-navigation",children:"Capability 3: Navigation"}),"\n",(0,s.jsx)(n.h3,{id:"acceptance-criteria-2",children:"Acceptance Criteria"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Success Rate"}),": \u226590% of navigation goals reached within tolerance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Failure Rate"}),": <10% aborted due to obstacles/planning failures"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Latency"}),": <15 seconds for typical 5-meter navigation"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-procedure-2",children:"Test Procedure"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Define Test Waypoints"})}),"\n",(0,s.jsx)(n.p,{children:"Create 10 test waypoints in Gazebo world:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# test_waypoints.yaml\r\nwaypoints:\r\n  - name: "kitchen"\r\n    x: 3.5\r\n    y: 2.0\r\n    theta: 0.0\r\n  - name: "living_room"\r\n    x: 0.0\r\n    y: 0.0\r\n    theta: 1.57\r\n  - name: "bedroom"\r\n    x: -2.0\r\n    y: 3.5\r\n    theta: 3.14\r\n  ...\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Run Navigation Node in Isolation"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Launch Gazebo and Nav2\r\nros2 launch capstone_demo gazebo_demo.launch.py\r\n\r\n# Terminal 2: Start navigation controller\r\nros2 run capstone_demo navigation_controller\r\n\r\n# Terminal 3: Send test goals\r\nros2 topic pub /navigation/goal geometry_msgs/PoseStamped \\\r\n  \"{header: {frame_id: 'map'}, pose: {position: {x: 3.5, y: 2.0, z: 0.0}}}\"\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Measure Success/Failure"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Automated test script\r\nimport time\r\n\r\nresults = []\r\nfor waypoint in test_waypoints:\r\n    start_time = time.time()\r\n    send_nav_goal(waypoint)\r\n    status = wait_for_result(timeout=30)  # Max 30s per goal\r\n    latency = time.time() - start_time\r\n\r\n    results.append({\r\n        'waypoint': waypoint['name'],\r\n        'status': status,  # SUCCEEDED, ABORTED, TIMEOUT\r\n        'latency': latency\r\n    })\r\n\r\nsuccess_rate = sum(1 for r in results if r['status'] == 'SUCCEEDED') / len(results)\r\nprint(f\"Success rate: {success_rate * 100:.1f}%\")\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Pass/Fail Criteria"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": \u226590% success rate (9 out of 10 waypoints reached)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": All successful navigations complete in <15 seconds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FAIL"}),": If robot collides with obstacles (check /scan topic)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mock-mode-1",children:"Mock Mode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'MOCK_NAV = True\r\nif MOCK_NAV:\r\n    time.sleep(2)  # Simulate navigation delay\r\n    nav_status = "SUCCEEDED"\r\nelse:\r\n    nav_status = self.nav_result.status\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"capability-4-object-detection",children:"Capability 4: Object Detection"}),"\n",(0,s.jsx)(n.h3,{id:"acceptance-criteria-3",children:"Acceptance Criteria"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Precision"}),": \u226585% correct detections (true positives)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bounding Box Accuracy"}),": IoU \u2265 0.5 with ground truth"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Latency"}),": <100ms per frame (\u226510 FPS)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-procedure-3",children:"Test Procedure"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Create Annotated Test Dataset"})}),"\n",(0,s.jsx)(n.p,{children:"Capture 50 test images from Gazebo with ground truth labels:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# test_detections.yaml\r\n- image: "kitchen_scene_01.png"\r\n  objects:\r\n    - class: "mug"\r\n      bbox: [320, 240, 80, 120]  # [x_center, y_center, width, height]\r\n    - class: "bottle"\r\n      bbox: [450, 260, 60, 150]\r\n- image: "kitchen_scene_02.png"\r\n  objects:\r\n    - class: "apple"\r\n      bbox: [200, 300, 70, 70]\r\n...\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Run Detection Node in Isolation"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Publish test images\r\nros2 bag play test_images.bag\r\n\r\n# Terminal 2: Run detection node\r\nros2 run capstone_demo object_detection_node\r\n\r\n# Terminal 3: Monitor detections\r\nros2 topic echo /perception/detections\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Measure Precision and IoU"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def compute_iou(bbox_pred, bbox_gt):\r\n    \"\"\"Intersection over Union for bounding boxes.\"\"\"\r\n    x1 = max(bbox_pred[0], bbox_gt[0])\r\n    y1 = max(bbox_pred[1], bbox_gt[1])\r\n    x2 = min(bbox_pred[2], bbox_gt[2])\r\n    y2 = min(bbox_pred[3], bbox_gt[3])\r\n\r\n    intersection = max(0, x2 - x1) * max(0, y2 - y1)\r\n    area_pred = (bbox_pred[2] - bbox_pred[0]) * (bbox_pred[3] - bbox_pred[1])\r\n    area_gt = (bbox_gt[2] - bbox_gt[0]) * (bbox_gt[3] - bbox_gt[1])\r\n    union = area_pred + area_gt - intersection\r\n\r\n    return intersection / union if union > 0 else 0\r\n\r\n# Evaluate all test images\r\ntrue_positives = 0\r\nfalse_positives = 0\r\n\r\nfor test_case in test_dataset:\r\n    detections = run_detection(test_case['image'])\r\n    ground_truth = test_case['objects']\r\n\r\n    for det in detections:\r\n        matched = False\r\n        for gt in ground_truth:\r\n            if det['class'] == gt['class'] and compute_iou(det['bbox'], gt['bbox']) >= 0.5:\r\n                true_positives += 1\r\n                matched = True\r\n                break\r\n        if not matched:\r\n            false_positives += 1\r\n\r\nprecision = true_positives / (true_positives + false_positives)\r\nprint(f\"Precision: {precision * 100:.1f}%\")\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Pass/Fail Criteria"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": Precision \u226585%"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": Average IoU \u22650.5 for matched detections"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": Inference latency <100ms per frame (measure with ",(0,s.jsx)(n.code,{children:"/perception/annotated_image"})," timestamp)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mock-mode-2",children:"Mock Mode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'MOCK_PERCEPTION = True\r\nif MOCK_PERCEPTION:\r\n    detected_objects = [\r\n        {"class": "mug", "confidence": 0.92, "bbox": [320, 240, 80, 120]}\r\n    ]\r\nelse:\r\n    detected_objects = self.perception_result.detections\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"capability-5-manipulation",children:"Capability 5: Manipulation"}),"\n",(0,s.jsx)(n.h3,{id:"acceptance-criteria-4",children:"Acceptance Criteria"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Success Rate"}),": \u226570% of pick-and-place tasks complete successfully"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Latency"}),": <15 seconds per pick-and-place sequence"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Failure Recovery"}),": Retry logic activates and succeeds within 3 attempts"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-procedure-4",children:"Test Procedure"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Define Test Objects and Poses"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# test_manipulation.yaml\r\ntest_cases:\r\n  - object: "mug"\r\n    pick_pose: {x: 0.5, y: 0.0, z: 0.8}\r\n    place_pose: {x: 0.3, y: 0.3, z: 0.8}\r\n  - object: "bottle"\r\n    pick_pose: {x: 0.6, y: -0.2, z: 0.75}\r\n    place_pose: {x: 0.4, y: 0.0, z: 0.75}\r\n  ...\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Run Manipulation Node in Isolation"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Launch MoveIt 2\r\nros2 launch capstone_demo moveit_demo.launch.py\r\n\r\n# Terminal 2: Run manipulation controller\r\nros2 run capstone_demo manipulation_controller\r\n\r\n# Terminal 3: Send pick goals\r\nros2 topic pub /manipulation/pick_target geometry_msgs/PoseStamped \\\r\n  \"{header: {frame_id: 'base_link'}, pose: {position: {x: 0.5, y: 0.0, z: 0.8}}}\"\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Measure Success Rate"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"results = []\r\nfor test_case in test_manipulation_cases:\r\n    # Send pick command\r\n    send_pick_goal(test_case['pick_pose'])\r\n    pick_status = wait_for_result(timeout=20)\r\n\r\n    # Send place command (only if pick succeeded)\r\n    if pick_status == \"PICK_SUCCESS\":\r\n        send_place_goal(test_case['place_pose'])\r\n        place_status = wait_for_result(timeout=20)\r\n        overall_success = (place_status == \"PLACE_SUCCESS\")\r\n    else:\r\n        overall_success = False\r\n\r\n    results.append({\r\n        'object': test_case['object'],\r\n        'success': overall_success\r\n    })\r\n\r\nsuccess_rate = sum(1 for r in results if r['success']) / len(results)\r\nprint(f\"Manipulation success rate: {success_rate * 100:.1f}%\")\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Pass/Fail Criteria"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": Success rate \u226570% (14 out of 20 trials)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PASS"}),": Retry logic activates on first failure and succeeds within 3 attempts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FAIL"}),": If any collision detected (check MoveIt planning scene)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"mock-mode-3",children:"Mock Mode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'MOCK_MANIPULATION = True\r\nif MOCK_MANIPULATION:\r\n    time.sleep(5)  # Simulate manipulation delay\r\n    manip_status = "PICK_SUCCESS"\r\nelse:\r\n    manip_status = self.manip_result.status\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"full-integration-testing",children:"Full Integration Testing"}),"\n",(0,s.jsxs)(n.p,{children:["After ",(0,s.jsx)(n.strong,{children:"all five capabilities pass"})," independent tests, enable full integration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# integration_demo.py\r\nMOCK_VOICE = False\r\nMOCK_LLM = False\r\nMOCK_NAV = False\r\nMOCK_PERCEPTION = False\r\nMOCK_MANIPULATION = False\n"})}),"\n",(0,s.jsx)(n.p,{children:"Run end-to-end test:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch capstone_demo gazebo_demo.launch.py\r\n\r\n# Speak into microphone or publish command\r\nros2 topic pub /voice/user_command std_msgs/String \\\r\n  \"{data: 'Bring me the mug from the kitchen'}\"\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected Timeline"})," (from quickstart.md):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"T+0s: Voice transcription starts"}),"\n",(0,s.jsx)(n.li,{children:"T+5s: LLM planning completes"}),"\n",(0,s.jsx)(n.li,{children:"T+10s: Navigation to kitchen"}),"\n",(0,s.jsx)(n.li,{children:"T+25s: Object detection"}),"\n",(0,s.jsx)(n.li,{children:"T+30s: Grasp execution"}),"\n",(0,s.jsx)(n.li,{children:"T+45s: Return navigation"}),"\n",(0,s.jsx)(n.li,{children:"T+60s: Place and task complete"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Integration Pass Criteria"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Task completes successfully in <90 seconds"}),"\n",(0,s.jsx)(n.li,{children:"No failures in nominal scenario (all objects present, no obstacles)"}),"\n",(0,s.jsx)(n.li,{children:"Graceful degradation in edge cases (object not found \u2192 clarification)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"mock-mode-architecture-benefits",children:"Mock Mode Architecture Benefits"}),"\n",(0,s.jsx)(n.p,{children:"Mock modes provide critical advantages for both development velocity and debugging efficiency in autonomous robotics systems."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rapid Iteration Without Dependencies"}),": Enabling mock modes allows developers to test integration logic without launching the full ROS 2 stack, Gazebo simulator, or external API services. A complete integration test that normally requires 90 seconds (including simulator startup, voice transcription, LLM API calls, navigation, and manipulation) completes in under 5 seconds with all mocks enabled. This 18x speedup dramatically accelerates the debug-test-fix cycle during active development."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Deterministic Testing for CI/CD"}),": Mock modes eliminate non-deterministic failures caused by network latency (LLM API timeouts), sensor noise (voice transcription errors), or physics simulation variance (navigation path variations). Automated test suites running in continuous integration pipelines achieve 100% reproducibility when using mocks, compared to 60-70% success rates with real components due to environmental factors. This determinism enables reliable regression detection\u2014if a test fails, the failure indicates a code bug, not environmental flakiness."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Selective Component Testing"}),": The granular mock configuration (",(0,s.jsx)(n.code,{children:"mock_voice"}),", ",(0,s.jsx)(n.code,{children:"mock_llm"}),", ",(0,s.jsx)(n.code,{children:"mock_navigation"}),", ",(0,s.jsx)(n.code,{children:"mock_perception"}),", ",(0,s.jsx)(n.code,{children:"mock_manipulation"}),") enables testing specific integration paths. For example, to validate LLM planning logic without voice dependencies, enable only ",(0,s.jsx)(n.code,{children:"mock_voice=True"})," while keeping all other mocks disabled. This selective isolation pinpoints failures to specific component boundaries, reducing debugging time from hours to minutes when tracking down integration bugs."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cost Reduction for Educational Deployments"}),": Mock modes eliminate external API costs during development and student lab exercises. With 30 students each running 10 test iterations per lab session, full LLM integration would incur 300 API calls ($0.30-$3.00 depending on model). Mock mode reduces this to zero cost for routine testing, reserving API quota for final validation runs where real-world behavior matters most."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting-isolation-tests",children:"Troubleshooting Isolation Tests"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Symptom"}),(0,s.jsx)(n.th,{children:"Likely Cause"}),(0,s.jsx)(n.th,{children:"Fix"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Voice WER >20%"}),(0,s.jsx)(n.td,{children:"Background noise, poor microphone"}),(0,s.jsx)(n.td,{children:"Use headset mic, test in quiet room"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"LLM invalid JSON"}),(0,s.jsx)(n.td,{children:"Prompt template outdated"}),(0,s.jsxs)(n.td,{children:["Update prompt in ",(0,s.jsx)(n.code,{children:"llm_prompts.md"})," contract"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Navigation aborts"}),(0,s.jsx)(n.td,{children:"Costmap inflation too conservative"}),(0,s.jsxs)(n.td,{children:["Reduce ",(0,s.jsx)(n.code,{children:"inflation_radius"})," in ",(0,s.jsx)(n.code,{children:"nav2_params.yaml"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Detection precision <70%"}),(0,s.jsx)(n.td,{children:"Wrong YOLO model or low confidence"}),(0,s.jsx)(n.td,{children:"Use YOLOv8m (not nano), lower threshold to 0.5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Manipulation <50% success"}),(0,s.jsx)(n.td,{children:"IK solver failing"}),(0,s.jsx)(n.td,{children:"Check joint limits, simplify target poses"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-testing-pitfalls-and-best-practices",children:"Common Testing Pitfalls and Best Practices"}),"\n",(0,s.jsx)(n.p,{children:"Effective isolation testing requires systematic methodology to avoid common mistakes that mask failures or produce false positives."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Pitfall 1: Testing Integration Before Capabilities Pass"}),". Teams frequently skip independent capability validation and jump directly to end-to-end testing, leading to multi-hour debugging sessions where the failure could originate from any of five subsystems. Best practice: Enforce a strict testing sequence\u2014each capability must achieve its acceptance criteria (voice \u226585% WER, navigation \u226590% success, manipulation \u226570% success) before enabling integration tests. Gate integration testing behind capability-level CI checks to prevent premature integration attempts."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Pitfall 2: Insufficient Test Dataset Diversity"}),'. Testing with only 5-10 similar commands (e.g., "get the mug", "fetch the cup") produces artificially high success rates that collapse in production when users issue diverse commands. Best practice: Create test datasets with 20+ commands covering edge cases\u2014ambiguous objects ("get the red thing"), multi-step tasks ("bring the mug and then navigate to the bedroom"), unknown locations ("find the remote"), and negation ("don\'t pick up the apple"). Acceptance criteria should hold across this diverse dataset, not just nominal cases.']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Pitfall 3: Ignoring Latency Targets During Development"}),'. Functional correctness ("it eventually works") is insufficient\u2014autonomous systems must meet strict latency requirements to be practically useful. A navigation system that succeeds 100% but takes 45 seconds for a 5-meter path fails the <15 second acceptance criterion. Best practice: Measure and log latency for every test trial using ROS 2 timestamps, not wall-clock time. Track p50, p95, and p99 latencies to detect performance regressions early, before they compound into unacceptable end-to-end delays.']}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.p,{children:["Independent capability testing is ",(0,s.jsx)(n.strong,{children:"essential"})," for validating complex autonomous systems:"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Isolate failures"})," to specific subsystems (not entire pipeline)"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Validate acceptance criteria"})," quantitatively (WER, success rate, IoU)"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Enable mock modes"})," for testing integration logic without hardware dependencies"]}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Parallelize development"})," (team members can work on separate capabilities)"]}),"\n",(0,s.jsxs)(n.p,{children:["Once all five capabilities pass independent tests, full integration has a ",(0,s.jsx)(n.strong,{children:">90% probability of success"})," on the first attempt\u2014compared to <20% without isolation testing."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Next Steps"}),": Return to ",(0,s.jsx)(n.a,{href:"/docs/modules/module-05-capstone/chapter-01-architecture",children:"Chapter 1: System Architecture"})," to see how these capabilities integrate, or proceed to ",(0,s.jsx)(n.a,{href:"/docs/modules/module-05-capstone/benchmarking",children:"Performance Benchmarking"})," to measure end-to-end system performance."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);