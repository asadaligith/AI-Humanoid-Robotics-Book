"use strict";(self.webpackChunkai_humanoid_robotics_book=self.webpackChunkai_humanoid_robotics_book||[]).push([[7806],{5927:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"modules/module-01-ros2-fundamentals/chapter-03-packages","title":"Chapter 3: Creating ROS 2 Packages","description":"Learn how to structure ROS 2 packages for modular and maintainable robotics code","source":"@site/docs/modules/module-01-ros2-fundamentals/chapter-03-packages.md","sourceDirName":"modules/module-01-ros2-fundamentals","slug":"/modules/module-01-ros2-fundamentals/chapter-03-packages","permalink":"/AI-Humanoid-Robotics-Book/docs/modules/module-01-ros2-fundamentals/chapter-03-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/asadaligith/AI-Humanoid-Robotics-Book/tree/main/docs/modules/module-01-ros2-fundamentals/chapter-03-packages.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Chapter 3: Creating ROS 2 Packages","description":"Learn how to structure ROS 2 packages for modular and maintainable robotics code","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"2\ufe0f\u20e3 Publisher-Subscriber Pattern","permalink":"/AI-Humanoid-Robotics-Book/docs/modules/module-01-ros2-fundamentals/chapter-02-pubsub"},"next":{"title":"4\ufe0f\u20e3 Services","permalink":"/AI-Humanoid-Robotics-Book/docs/modules/module-01-ros2-fundamentals/chapter-04-services"}}');var i=a(4848),s=a(8453);const t={title:"Chapter 3: Creating ROS 2 Packages",description:"Learn how to structure ROS 2 packages for modular and maintainable robotics code",sidebar_position:3},c="Chapter 3: Creating ROS 2 Packages",o={},l=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"Python Package Layout",id:"python-package-layout",level:3},{value:"C++ Package Layout",id:"c-package-layout",level:3},{value:"Creating a Python Package",id:"creating-a-python-package",level:2},{value:"Using ros2 pkg create",id:"using-ros2-pkg-create",level:3},{value:"Package Dependencies",id:"package-dependencies",level:3},{value:"Entry Points Configuration",id:"entry-points-configuration",level:3},{value:"Building Packages",id:"building-packages",level:2},{value:"Using colcon",id:"using-colcon",level:3},{value:"Running Package Nodes",id:"running-package-nodes",level:3},{value:"Creating a C++ Package",id:"creating-a-c-package",level:2},{value:"CMakeLists.txt Configuration",id:"cmakeliststxt-configuration",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Package Organization",id:"package-organization",level:3},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Exercise",id:"exercise",level:2},{value:"Summary",id:"summary",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-3-creating-ros-2-packages",children:"Chapter 3: Creating ROS 2 Packages"})}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create"})," Python and C++ ROS 2 packages using standard templates"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configure"})," package dependencies and metadata"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Build"})," packages using colcon build system"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Organize"})," code following ROS 2 best practices"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.p,{children:["A ROS 2 package is the atomic unit of software organization. Packages group related nodes, messages, services, and configuration files, making code reusable and shareable across projects",(0,i.jsx)(n.sup,{children:(0,i.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,i.jsx)(n.h3,{id:"python-package-layout",children:"Python Package Layout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my_robot_controller/\n\u251c\u2500\u2500 package.xml          # Package metadata\n\u251c\u2500\u2500 setup.py            # Python setup script\n\u251c\u2500\u2500 setup.cfg           # Configuration\n\u251c\u2500\u2500 my_robot_controller/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 controller_node.py\n\u2502   \u2514\u2500\u2500 utils.py\n\u251c\u2500\u2500 resource/\n\u2502   \u2514\u2500\u2500 my_robot_controller\n\u251c\u2500\u2500 test/\n\u2502   \u2514\u2500\u2500 test_controller.py\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsx)(n.h3,{id:"c-package-layout",children:"C++ Package Layout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my_robot_driver/\n\u251c\u2500\u2500 package.xml\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 include/\n\u2502   \u2514\u2500\u2500 my_robot_driver/\n\u2502       \u2514\u2500\u2500 driver.hpp\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 driver.cpp\n\u2502   \u2514\u2500\u2500 main.cpp\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-python-package",children:"Creating a Python Package"}),"\n",(0,i.jsx)(n.h3,{id:"using-ros2-pkg-create",children:"Using ros2 pkg create"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create workspace\nmkdir -p ~/ros2_ws/src\ncd ~/ros2_ws/src\n\n# Create Python package\nros2 pkg create --build-type ament_python my_robot_controller\n\n# Directory structure created automatically\n"})}),"\n",(0,i.jsx)(n.h3,{id:"package-dependencies",children:"Package Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["Edit ",(0,i.jsx)(n.code,{children:"package.xml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<package format="3">\n  <name>my_robot_controller</name>\n  <version>0.1.0</version>\n  <description>Robot controller package</description>\n  <maintainer email="you@example.com">Your Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <exec_depend>rclpy</exec_depend>\n  <exec_depend>std_msgs</exec_depend>\n  <exec_depend>geometry_msgs</exec_depend>\n\n  <test_depend>pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"entry-points-configuration",children:"Entry Points Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Edit ",(0,i.jsx)(n.code,{children:"setup.py"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_robot_controller'\n\nsetup(\n    name=package_name,\n    version='0.1.0',\n    packages=[package_name],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='you@example.com',\n    description='Robot controller package',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'controller = my_robot_controller.controller_node:main',\n        ],\n    },\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"building-packages",children:"Building Packages"}),"\n",(0,i.jsx)(n.h3,{id:"using-colcon",children:"Using colcon"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Build all packages in workspace\ncd ~/ros2_ws\ncolcon build\n\n# Build specific package\ncolcon build --packages-select my_robot_controller\n\n# Build with symlink (for faster iteration)\ncolcon build --symlink-install\n\n# Source the workspace\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(n.h3,{id:"running-package-nodes",children:"Running Package Nodes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Run node using package name and entry point\nros2 run my_robot_controller controller\n"})}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-c-package",children:"Creating a C++ Package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create C++ package with dependencies\nros2 pkg create --build-type ament_cmake \\\n    --dependencies rclcpp std_msgs geometry_msgs \\\n    my_robot_driver\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cmakeliststxt-configuration",children:"CMakeLists.txt Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"cmake_minimum_required(VERSION 3.8)\nproject(my_robot_driver)\n\n# Find dependencies\nfind_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(std_msgs REQUIRED)\n\n# Add executable\nadd_executable(driver_node src/driver.cpp src/main.cpp)\nament_target_dependencies(driver_node rclcpp std_msgs)\n\n# Install executable\ninstall(TARGETS driver_node\n  DESTINATION lib/${PROJECT_NAME})\n\nament_package()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"package-organization",children:"Package Organization"}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"DO"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"One package per logical component (perception, navigation, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Include README.md with usage instructions"}),"\n",(0,i.jsxs)(n.li,{children:["Add launch files in ",(0,i.jsx)(n.code,{children:"launch/"})," directory"]}),"\n",(0,i.jsxs)(n.li,{children:["Store configuration files in ",(0,i.jsx)(n.code,{children:"config/"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"DON'T"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Put all code in a single package"}),"\n",(0,i.jsx)(n.li,{children:"Mix Python and C++ in one package"}),"\n",(0,i.jsx)(n.li,{children:"Omit package documentation"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Package names: lowercase with underscores (",(0,i.jsx)(n.code,{children:"my_robot_controller"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Node names: descriptive and unique (",(0,i.jsx)(n.code,{children:"obstacle_detector"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Topic names: hierarchical (",(0,i.jsx)(n.code,{children:"/robot/sensors/lidar"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"exercise",children:"Exercise"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Task"}),": Create a ROS 2 package called ",(0,i.jsx)(n.code,{children:"battery_monitor"})," with:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"A publisher node that broadcasts battery voltage (simulated 12V \xb1 random noise)"}),"\n",(0,i.jsx)(n.li,{children:"A subscriber node that logs battery status and warns if voltage < 11V"}),"\n",(0,i.jsx)(n.li,{children:"Proper package.xml with dependencies"}),"\n",(0,i.jsx)(n.li,{children:"setup.py with entry points for both nodes"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Build and run"})," your package to verify it works."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Code Example"}),": See ",(0,i.jsx)(n.code,{children:"examples/module-01-ros2-fundamentals/example-02-package/"})]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"In this chapter, you learned:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ROS 2 package structure for Python and C++"}),"\n",(0,i.jsx)(n.li,{children:"How to create packages using ros2 pkg create"}),"\n",(0,i.jsx)(n.li,{children:"Building packages with colcon"}),"\n",(0,i.jsx)(n.li,{children:"Best practices for package organization"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next"}),": ",(0,i.jsx)(n.a,{href:"/AI-Humanoid-Robotics-Book/docs/modules/module-01-ros2-fundamentals/chapter-04-services",children:"Chapter 4: Services for Synchronous Communication"})]}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"ROS 2 Package Creation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://colcon.readthedocs.io/",children:"colcon Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://design.ros2.org/articles/ament.html",children:"ament Build System"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Estimated Reading Time"}),": 20 minutes\n",(0,i.jsx)(n.strong,{children:"Hands-On Time"}),": 40 minutes"]}),"\n","\n",(0,i.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,i.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,i.jsxs)(n.p,{children:['ROS 2 Documentation. "Creating a Package." ',(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html"})," ",(0,i.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>c});var r=a(6540);const i={},s=r.createContext(i);function t(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);