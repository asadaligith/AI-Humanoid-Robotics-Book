"use strict";(self.webpackChunkai_humanoid_robotics_book=self.webpackChunkai_humanoid_robotics_book||[]).push([[4379],{3564:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"rag-chatbot/setup","title":"RAG Chatbot Setup Guide","description":"Prerequisites","source":"@site/docs/rag-chatbot/setup.md","sourceDirName":"rag-chatbot","slug":"/rag-chatbot/setup","permalink":"/AI-Humanoid-Robotics-Book/docs/rag-chatbot/setup","draft":false,"unlisted":false,"editUrl":"https://github.com/asadaligith/AI-Humanoid-Robotics-Book/tree/main/docs/rag-chatbot/setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"RAG Chatbot Architecture","permalink":"/AI-Humanoid-Robotics-Book/docs/rag-chatbot/architecture"},"next":{"title":"RAG Chatbot Deployment Guide","permalink":"/AI-Humanoid-Robotics-Book/docs/rag-chatbot/deployment"}}');var i=t(4848),a=t(8453);const o={},r="RAG Chatbot Setup Guide",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Requirements File",id:"requirements-file",level:2},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"Database Setup",id:"database-setup",level:2},{value:"1. Create Neon PostgreSQL Database",id:"1-create-neon-postgresql-database",level:3},{value:"2. Setup Qdrant Vector Database",id:"2-setup-qdrant-vector-database",level:3},{value:"Ingesting Documentation",id:"ingesting-documentation",level:2},{value:"Running the API",id:"running-the-api",level:2},{value:"Testing the API",id:"testing-the-api",level:2},{value:"Docker Deployment",id:"docker-deployment",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Database connection fails",id:"issue-database-connection-fails",level:3},{value:"Issue: Qdrant connection timeout",id:"issue-qdrant-connection-timeout",level:3},{value:"Issue: Embeddings failing",id:"issue-embeddings-failing",level:3},{value:"References",id:"references",level:2}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"rag-chatbot-setup-guide",children:"RAG Chatbot Setup Guide"})}),"\n",(0,i.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Python 3.9+"}),"\n",(0,i.jsx)(e.li,{children:"Node.js 18+ (for Docusaurus integration)"}),"\n",(0,i.jsx)(e.li,{children:"Git"}),"\n",(0,i.jsxs)(e.li,{children:["API Keys:","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Anthropic Claude API"}),"\n",(0,i.jsx)(e.li,{children:"OpenAI API (for embeddings)"}),"\n",(0,i.jsx)(e.li,{children:"Qdrant Cloud account"}),"\n",(0,i.jsx)(e.li,{children:"Neon PostgreSQL account"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Clone repository\ngit clone https://github.com/asadaligith/AI-Humanoid-Robotics-Book.git\ncd AI-Humanoid-Robotics-Book\n\n# Create chatbot directory\nmkdir -p chatbot\ncd chatbot\n\n# Create virtual environment\npython3 -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n"})}),"\n",(0,i.jsx)(e.h2,{id:"requirements-file",children:"Requirements File"}),"\n",(0,i.jsxs)(e.p,{children:["Create ",(0,i.jsx)(e.code,{children:"chatbot/requirements.txt"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-txt",children:"# Core dependencies\nfastapi==0.104.1\nuvicorn[standard]==0.24.0\nanthropic==0.7.7\nopenai==1.3.7\nqdrant-client==1.7.0\npsycopg2-binary==2.9.9\n\n# Data processing\nlangchain==0.0.340\npython-dotenv==1.0.0\npydantic==2.5.0\n\n# Utilities\nredis==5.0.1\ntenacity==8.2.3\nmarkdown==3.5.1\npython-multipart==0.0.6\n\n# Development\npytest==7.4.3\npytest-asyncio==0.21.1\nblack==23.11.0\n"})}),"\n",(0,i.jsx)(e.h2,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,i.jsxs)(e.p,{children:["Create ",(0,i.jsx)(e.code,{children:".env"})," file:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# API Keys\nANTHROPIC_API_KEY=sk-ant-api03-...\nOPENAI_API_KEY=sk-...\n\n# Qdrant\nQDRANT_URL=https://your-cluster.qdrant.io:6333\nQDRANT_API_KEY=your-qdrant-api-key\nQDRANT_COLLECTION=course_docs\n\n# PostgreSQL (Neon)\nDATABASE_URL=postgresql://user:password@your-project.neon.tech/chatbot?sslmode=require\nDB_POOL_SIZE=10\nDB_MAX_OVERFLOW=20\n\n# Redis (Optional)\nREDIS_URL=redis://localhost:6379/0\n\n# Application\nAPP_ENV=development\nAPP_PORT=8000\nAPP_HOST=0.0.0.0\nLOG_LEVEL=INFO\n\n# Security\nAPI_RATE_LIMIT=10  # requests per minute\nMAX_CONTEXT_LENGTH=8000\nMAX_RESPONSE_TOKENS=2048\n"})}),"\n",(0,i.jsx)(e.h2,{id:"database-setup",children:"Database Setup"}),"\n",(0,i.jsx)(e.h3,{id:"1-create-neon-postgresql-database",children:"1. Create Neon PostgreSQL Database"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# Sign up at https://neon.tech\n# Create new project: "chatbot"\n# Copy connection string\n\n# Initialize database\npython scripts/init_database.py\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"scripts/init_database.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\nimport psycopg2\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\n# Connect to database\nconn = psycopg2.connect(os.getenv('DATABASE_URL'))\ncur = conn.cursor()\n\n# Create tables\nwith open('schema.sql', 'r') as f:\n    cur.execute(f.read())\n\nconn.commit()\ncur.close()\nconn.close()\n\nprint(\"Database initialized successfully!\")\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"schema.sql"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- Enable UUID extension\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Documents table\nCREATE TABLE IF NOT EXISTS documents (\n    id SERIAL PRIMARY KEY,\n    title VARCHAR(255) NOT NULL,\n    url VARCHAR(512),\n    module VARCHAR(50),\n    chapter VARCHAR(50),\n    content_hash VARCHAR(64) UNIQUE,\n    chunk_count INTEGER DEFAULT 0,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Chat sessions\nCREATE TABLE IF NOT EXISTS chat_sessions (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    user_id VARCHAR(100),\n    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    last_activity TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    message_count INTEGER DEFAULT 0,\n    metadata JSONB\n);\n\n-- Chat messages\nCREATE TABLE IF NOT EXISTS chat_messages (\n    id SERIAL PRIMARY KEY,\n    session_id UUID REFERENCES chat_sessions(id) ON DELETE CASCADE,\n    role VARCHAR(20) NOT NULL CHECK (role IN ('user', 'assistant')),\n    content TEXT NOT NULL,\n    tokens_used INTEGER,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Retrieved documents\nCREATE TABLE IF NOT EXISTS retrieved_documents (\n    id SERIAL PRIMARY KEY,\n    session_id UUID REFERENCES chat_sessions(id) ON DELETE CASCADE,\n    document_id INTEGER REFERENCES documents(id),\n    relevance_score FLOAT,\n    query TEXT,\n    rank INTEGER,\n    retrieved_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- User feedback\nCREATE TABLE IF NOT EXISTS feedback (\n    id SERIAL PRIMARY KEY,\n    session_id UUID REFERENCES chat_sessions(id) ON DELETE CASCADE,\n    message_id INTEGER,\n    rating INTEGER CHECK (rating BETWEEN 1 AND 5),\n    comment TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Query analytics\nCREATE TABLE IF NOT EXISTS query_analytics (\n    id SERIAL PRIMARY KEY,\n    session_id UUID REFERENCES chat_sessions(id) ON DELETE CASCADE,\n    query TEXT NOT NULL,\n    response_time_ms INTEGER,\n    contexts_retrieved INTEGER,\n    model_used VARCHAR(50),\n    tokens_used INTEGER,\n    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Indexes\nCREATE INDEX IF NOT EXISTS idx_sessions_user ON chat_sessions(user_id);\nCREATE INDEX IF NOT EXISTS idx_sessions_activity ON chat_sessions(last_activity DESC);\nCREATE INDEX IF NOT EXISTS idx_messages_session ON chat_messages(session_id);\nCREATE INDEX IF NOT EXISTS idx_documents_module ON documents(module);\nCREATE INDEX IF NOT EXISTS idx_documents_hash ON documents(content_hash);\nCREATE INDEX IF NOT EXISTS idx_retrieved_query ON retrieved_documents(query);\nCREATE INDEX IF NOT EXISTS idx_analytics_timestamp ON query_analytics(timestamp DESC);\n\n-- Function to update last_activity\nCREATE OR REPLACE FUNCTION update_session_activity()\nRETURNS TRIGGER AS $$\nBEGIN\n    UPDATE chat_sessions\n    SET last_activity = CURRENT_TIMESTAMP,\n        message_count = message_count + 1\n    WHERE id = NEW.session_id;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Trigger to auto-update session activity\nCREATE TRIGGER update_session_activity_trigger\nAFTER INSERT ON chat_messages\nFOR EACH ROW\nEXECUTE FUNCTION update_session_activity();\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2-setup-qdrant-vector-database",children:"2. Setup Qdrant Vector Database"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# Sign up at https://cloud.qdrant.io\n# Create cluster: "chatbot-vectors"\n# Copy API key and URL\n\n# Initialize collection\npython scripts/init_qdrant.py\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"scripts/init_qdrant.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\nfrom qdrant_client import QdrantClient\nfrom qdrant_client.models import Distance, VectorParams\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\n# Connect to Qdrant\nclient = QdrantClient(\n    url=os.getenv(\'QDRANT_URL\'),\n    api_key=os.getenv(\'QDRANT_API_KEY\')\n)\n\ncollection_name = os.getenv(\'QDRANT_COLLECTION\', \'course_docs\')\n\n# Create collection\nclient.recreate_collection(\n    collection_name=collection_name,\n    vectors_config=VectorParams(\n        size=1536,  # OpenAI text-embedding-3-small\n        distance=Distance.COSINE\n    )\n)\n\n# Create payload indexes\nclient.create_payload_index(\n    collection_name=collection_name,\n    field_name="module",\n    field_schema="keyword"\n)\n\nclient.create_payload_index(\n    collection_name=collection_name,\n    field_name="chapter",\n    field_schema="keyword"\n)\n\nclient.create_payload_index(\n    collection_name=collection_name,\n    field_name="title",\n    field_schema="text"\n)\n\nprint(f"Qdrant collection \'{collection_name}\' created successfully!")\n'})}),"\n",(0,i.jsx)(e.h2,{id:"ingesting-documentation",children:"Ingesting Documentation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Ingest all course documentation\npython scripts/ingest_docs.py --docs-path ../docs\n\n# Ingest specific module\npython scripts/ingest_docs.py --docs-path ../docs/modules/module-01-ros2-fundamentals\n\n# Re-index (clears and re-ingests)\npython scripts/ingest_docs.py --docs-path ../docs --reindex\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"scripts/ingest_docs.py"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nIngest course documentation into Qdrant and PostgreSQL\n"""\nimport argparse\nfrom pathlib import Path\nimport hashlib\nfrom typing import List, Dict\nfrom qdrant_client import QdrantClient\nfrom qdrant_client.models import PointStruct\nfrom openai import OpenAI\nimport psycopg2\nimport os\nfrom dotenv import load_dotenv\nimport re\n\nload_dotenv()\n\nclass DocumentIngester:\n    def __init__(self):\n        # Initialize clients\n        self.qdrant = QdrantClient(\n            url=os.getenv(\'QDRANT_URL\'),\n            api_key=os.getenv(\'QDRANT_API_KEY\')\n        )\n        self.openai = OpenAI(api_key=os.getenv(\'OPENAI_API_KEY\'))\n        self.db = psycopg2.connect(os.getenv(\'DATABASE_URL\'))\n        self.collection_name = os.getenv(\'QDRANT_COLLECTION\', \'course_docs\')\n\n    def ingest_directory(self, docs_path: str, reindex: bool = False):\n        """Ingest all markdown files."""\n        docs_path = Path(docs_path)\n\n        if reindex:\n            print("Clearing existing data...")\n            self.clear_data()\n\n        print(f"Scanning {docs_path}...")\n        md_files = list(docs_path.rglob("*.md"))\n        print(f"Found {len(md_files)} markdown files")\n\n        total_chunks = 0\n\n        for md_file in md_files:\n            print(f"\\nProcessing: {md_file.name}")\n            chunks = self.process_file(md_file)\n            total_chunks += len(chunks)\n            print(f"  Created {len(chunks)} chunks")\n\n        print(f"\\n\u2713 Ingestion complete! Total chunks: {total_chunks}")\n\n    def process_file(self, file_path: Path) -> List[Dict]:\n        """Process a single markdown file."""\n        content = file_path.read_text(encoding=\'utf-8\')\n\n        # Extract metadata\n        metadata = self.extract_metadata(file_path, content)\n\n        # Check if already ingested\n        content_hash = hashlib.sha256(content.encode()).hexdigest()\n        if self.is_already_ingested(content_hash):\n            print(f"  Skipping (already ingested)")\n            return []\n\n        # Chunk document\n        chunks = self.chunk_document(content, metadata)\n\n        # Generate embeddings\n        texts = [chunk[\'text\'] for chunk in chunks]\n        embeddings = self.generate_embeddings(texts)\n\n        # Store in Qdrant\n        points = []\n        for i, (chunk, embedding) in enumerate(zip(chunks, embeddings)):\n            point_id = hash(f"{content_hash}_{i}") % (10 ** 10)\n            points.append(\n                PointStruct(\n                    id=point_id,\n                    vector=embedding,\n                    payload=chunk\n                )\n            )\n\n        self.qdrant.upsert(\n            collection_name=self.collection_name,\n            points=points\n        )\n\n        # Store metadata in PostgreSQL\n        self.store_metadata(metadata, content_hash, len(chunks))\n\n        return chunks\n\n    def extract_metadata(self, file_path: Path, content: str) -> Dict:\n        """Extract metadata from file path and content."""\n        # Parse file path\n        parts = file_path.parts\n        module = None\n        chapter = None\n\n        for part in parts:\n            if \'module-\' in part:\n                module = part\n            if \'chapter-\' in part:\n                chapter = part\n\n        # Extract title (first # heading)\n        title_match = re.search(r\'^#\\s+(.+)$\', content, re.MULTILINE)\n        title = title_match.group(1) if title_match else file_path.stem\n\n        # Build URL\n        rel_path = file_path.relative_to(file_path.parents[2])  # Relative to docs/\n        url = f"/docs/{str(rel_path).replace(\'.md\', \'\').replace(os.sep, \'/\')}"\n\n        return {\n            \'title\': title,\n            \'url\': url,\n            \'module\': module,\n            \'chapter\': chapter,\n            \'file_path\': str(file_path)\n        }\n\n    def chunk_document(self, content: str, metadata: Dict, chunk_size: int = 512, overlap: int = 50) -> List[Dict]:\n        """Split document into chunks."""\n        chunks = []\n\n        # Split by sections (## headings)\n        sections = re.split(r\'\\n##\\s+\', content)\n\n        for section in sections:\n            if not section.strip():\n                continue\n\n            # Split section into paragraphs\n            paragraphs = section.split(\'\\n\\n\')\n\n            current_chunk = []\n            current_tokens = 0\n\n            for para in paragraphs:\n                para_tokens = len(para.split())\n\n                if current_tokens + para_tokens > chunk_size and current_chunk:\n                    # Save chunk\n                    chunks.append({\n                        \'text\': \'\\n\\n\'.join(current_chunk),\n                        **metadata,\n                        \'chunk_index\': len(chunks)\n                    })\n\n                    # Keep overlap\n                    if len(current_chunk) > 1:\n                        current_chunk = current_chunk[-1:]\n                        current_tokens = len(current_chunk[0].split())\n                    else:\n                        current_chunk = []\n                        current_tokens = 0\n\n                current_chunk.append(para)\n                current_tokens += para_tokens\n\n            # Add final chunk\n            if current_chunk:\n                chunks.append({\n                    \'text\': \'\\n\\n\'.join(current_chunk),\n                    **metadata,\n                    \'chunk_index\': len(chunks)\n                })\n\n        return chunks\n\n    def generate_embeddings(self, texts: List[str]) -> List[List[float]]:\n        """Generate embeddings using OpenAI."""\n        response = self.openai.embeddings.create(\n            model="text-embedding-3-small",\n            input=texts\n        )\n        return [item.embedding for item in response.data]\n\n    def is_already_ingested(self, content_hash: str) -> bool:\n        """Check if document already ingested."""\n        cur = self.db.cursor()\n        cur.execute(\n            "SELECT COUNT(*) FROM documents WHERE content_hash = %s",\n            (content_hash,)\n        )\n        count = cur.fetchone()[0]\n        cur.close()\n        return count > 0\n\n    def store_metadata(self, metadata: Dict, content_hash: str, chunk_count: int):\n        """Store document metadata in PostgreSQL."""\n        cur = self.db.cursor()\n        cur.execute(\n            """\n            INSERT INTO documents (title, url, module, chapter, content_hash, chunk_count)\n            VALUES (%s, %s, %s, %s, %s, %s)\n            ON CONFLICT (content_hash) DO UPDATE\n            SET updated_at = CURRENT_TIMESTAMP\n            """,\n            (\n                metadata[\'title\'],\n                metadata[\'url\'],\n                metadata[\'module\'],\n                metadata[\'chapter\'],\n                content_hash,\n                chunk_count\n            )\n        )\n        self.db.commit()\n        cur.close()\n\n    def clear_data(self):\n        """Clear all data (for reindexing)."""\n        # Clear Qdrant\n        self.qdrant.delete_collection(self.collection_name)\n        self.qdrant.create_collection(\n            collection_name=self.collection_name,\n            vectors_config=VectorParams(size=1536, distance=Distance.COSINE)\n        )\n\n        # Clear PostgreSQL\n        cur = self.db.cursor()\n        cur.execute("TRUNCATE TABLE documents RESTART IDENTITY CASCADE")\n        self.db.commit()\n        cur.close()\n\ndef main():\n    parser = argparse.ArgumentParser(description=\'Ingest documentation\')\n    parser.add_argument(\'--docs-path\', required=True, help=\'Path to docs directory\')\n    parser.add_argument(\'--reindex\', action=\'store_true\', help=\'Clear and reindex\')\n\n    args = parser.parse_args()\n\n    ingester = DocumentIngester()\n    ingester.ingest_directory(args.docs_path, args.reindex)\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,i.jsx)(e.h2,{id:"running-the-api",children:"Running the API"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Development mode (auto-reload)\nuvicorn app.main:app --reload --host 0.0.0.0 --port 8000\n\n# Production mode\nuvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4\n"})}),"\n",(0,i.jsx)(e.h2,{id:"testing-the-api",children:"Testing the API"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# Health check\ncurl http://localhost:8000/health\n\n# Chat request\ncurl -X POST http://localhost:8000/chat \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "query": "How do I create a ROS 2 publisher?",\n    "top_k": 5\n  }\'\n\n# With session\ncurl -X POST http://localhost:8000/chat \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "query": "What about subscribers?",\n    "session_id": "550e8400-e29b-41d4-a716-446655440000"\n  }\'\n'})}),"\n",(0,i.jsx)(e.h2,{id:"docker-deployment",children:"Docker Deployment"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-dockerfile",children:'# Dockerfile\nFROM python:3.11-slim\n\nWORKDIR /app\n\n# Install dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy application\nCOPY app/ ./app/\nCOPY .env .\n\n# Expose port\nEXPOSE 8000\n\n# Run application\nCMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'# docker-compose.yml\nversion: \'3.8\'\n\nservices:\n  chatbot-api:\n    build: .\n    ports:\n      - "8000:8000"\n    environment:\n      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}\n      - OPENAI_API_KEY=${OPENAI_API_KEY}\n      - QDRANT_URL=${QDRANT_URL}\n      - QDRANT_API_KEY=${QDRANT_API_KEY}\n      - DATABASE_URL=${DATABASE_URL}\n    restart: unless-stopped\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - "6379:6379"\n    restart: unless-stopped\n'})}),"\n",(0,i.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Test locally"}),": Ingest documentation and test queries"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Deploy"}),": Follow ",(0,i.jsx)(e.a,{href:"/AI-Humanoid-Robotics-Book/docs/rag-chatbot/deployment",children:"deployment.md"})," for production"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Integrate"}),": Add chat widget to Docusaurus (see ",(0,i.jsx)(e.a,{href:"integration.md",children:"integration.md"}),")"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Monitor"}),": Set up analytics and logging"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(e.h3,{id:"issue-database-connection-fails",children:"Issue: Database connection fails"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Test connection\npython -c \"import psycopg2; psycopg2.connect('$DATABASE_URL'); print('\u2713 Connected')\"\n"})}),"\n",(0,i.jsx)(e.h3,{id:"issue-qdrant-connection-timeout",children:"Issue: Qdrant connection timeout"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Verify API key and URL\npython -c \"from qdrant_client import QdrantClient; client = QdrantClient(url='$QDRANT_URL', api_key='$QDRANT_API_KEY'); print(client.get_collections())\"\n"})}),"\n",(0,i.jsx)(e.h3,{id:"issue-embeddings-failing",children:"Issue: Embeddings failing"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Test OpenAI API\npython -c \"from openai import OpenAI; client = OpenAI(); print(client.embeddings.create(model='text-embedding-3-small', input=['test']))\"\n"})}),"\n",(0,i.jsx)(e.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://qdrant.tech/documentation/quick-start/",children:"Qdrant Setup"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://neon.tech/docs/get-started-with-neon/signing-up",children:"Neon PostgreSQL"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://fastapi.tiangolo.com/deployment/",children:"FastAPI Deployment"})}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>r});var s=t(6540);const i={},a=s.createContext(i);function o(n){const e=s.useContext(a);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);