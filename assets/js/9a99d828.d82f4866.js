"use strict";(self.webpackChunkai_humanoid_robotics_book=self.webpackChunkai_humanoid_robotics_book||[]).push([[3045],{998:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"integrations/api-reference","title":"API Integration Reference","description":"Overview","source":"@site/docs/integrations/api-reference.md","sourceDirName":"integrations","slug":"/integrations/api-reference","permalink":"/docs/integrations/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/asadaligith/AI-Humanoid-Robotics-Book/tree/main/docs/integrations/api-reference.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"RAG Chatbot Deployment Guide","permalink":"/docs/rag-chatbot/deployment"},"next":{"title":"Quality Gates - Project Readiness","permalink":"/docs/quality-gates"}}');var s=r(4848),i=r(8453);const o={},a="API Integration Reference",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Anthropic Claude API",id:"anthropic-claude-api",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Available Models",id:"available-models",level:3},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Tool Use (Structured Outputs)",id:"tool-use-structured-outputs",level:3},{value:"Vision Capabilities",id:"vision-capabilities",level:3},{value:"Streaming Responses",id:"streaming-responses",level:3},{value:"Rate Limits &amp; Best Practices",id:"rate-limits--best-practices",level:3},{value:"OpenAI API",id:"openai-api",level:2},{value:"Embeddings for RAG",id:"embeddings-for-rag",level:3},{value:"Model Options",id:"model-options",level:3},{value:"Batch Processing",id:"batch-processing",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Qdrant Vector Database",id:"qdrant-vector-database",level:2},{value:"Initialization",id:"initialization",level:3},{value:"Inserting Vectors",id:"inserting-vectors",level:3},{value:"Searching",id:"searching",level:3},{value:"Filtered Search",id:"filtered-search",level:3},{value:"Batch Operations",id:"batch-operations",level:3},{value:"Neon PostgreSQL",id:"neon-postgresql",level:2},{value:"Connection",id:"connection",level:3},{value:"Basic Operations",id:"basic-operations",level:3},{value:"Transactions",id:"transactions",level:3},{value:"Prepared Statements",id:"prepared-statements",level:3},{value:"Complete RAG Pipeline Example",id:"complete-rag-pipeline-example",level:2},{value:"Cost Estimation",id:"cost-estimation",level:2},{value:"Example Usage (1000 queries/day)",id:"example-usage-1000-queriesday",level:3},{value:"Rate Limiting Strategies",id:"rate-limiting-strategies",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"api-integration-reference",children:"API Integration Reference"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This guide covers integration with external APIs used in the AI & Humanoid Robotics course: Anthropic Claude API for LLM reasoning, OpenAI API for embeddings, Qdrant for vector search, and Neon PostgreSQL for data storage."}),"\n",(0,s.jsx)(n.h2,{id:"anthropic-claude-api",children:"Anthropic Claude API"}),"\n",(0,s.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import anthropic\r\nimport os\r\n\r\n# Initialize client\r\nclient = anthropic.Anthropic(\r\n    api_key=os.environ.get("ANTHROPIC_API_KEY")\r\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"available-models",children:"Available Models"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Model"}),(0,s.jsx)(n.th,{children:"Context Window"}),(0,s.jsx)(n.th,{children:"Cost (Input/Output per 1M tokens)"}),(0,s.jsx)(n.th,{children:"Best For"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Claude 3.5 Sonnet"}),(0,s.jsx)(n.td,{children:"200K"}),(0,s.jsx)(n.td,{children:"$3 / $15"}),(0,s.jsx)(n.td,{children:"Production (balanced speed/quality)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Claude 3 Opus"}),(0,s.jsx)(n.td,{children:"200K"}),(0,s.jsx)(n.td,{children:"$15 / $75"}),(0,s.jsx)(n.td,{children:"Complex reasoning tasks"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Claude 3 Haiku"}),(0,s.jsx)(n.td,{children:"200K"}),(0,s.jsx)(n.td,{children:"$0.25 / $1.25"}),(0,s.jsx)(n.td,{children:"Fast, simple tasks"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Simple message\r\nmessage = client.messages.create(\r\n    model="claude-3-5-sonnet-20241022",\r\n    max_tokens=1024,\r\n    messages=[\r\n        {"role": "user", "content": "Explain ROS 2 publishers"}\r\n    ]\r\n)\r\n\r\nprint(message.content[0].text)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"tool-use-structured-outputs",children:"Tool Use (Structured Outputs)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Define tool\r\ntools = [{\r\n    "name": "get_robot_status",\r\n    "description": "Get current robot status including battery and position",\r\n    "input_schema": {\r\n        "type": "object",\r\n        "properties": {\r\n            "include_battery": {"type": "boolean"},\r\n            "include_position": {"type": "boolean"}\r\n        },\r\n        "required": ["include_battery"]\r\n    }\r\n}]\r\n\r\n# Call with tools\r\nmessage = client.messages.create(\r\n    model="claude-3-5-sonnet-20241022",\r\n    max_tokens=1024,\r\n    tools=tools,\r\n    messages=[\r\n        {"role": "user", "content": "Check robot battery and position"}\r\n    ]\r\n)\r\n\r\n# Extract tool use\r\nfor block in message.content:\r\n    if block.type == "tool_use":\r\n        print(f"Tool: {block.name}")\r\n        print(f"Input: {block.input}")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"vision-capabilities",children:"Vision Capabilities"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import base64\r\n\r\n# Read image\r\nwith open("robot_camera.jpg", "rb") as f:\r\n    image_data = base64.b64encode(f.read()).decode(\'utf-8\')\r\n\r\n# Send image + text\r\nmessage = client.messages.create(\r\n    model="claude-3-5-sonnet-20241022",\r\n    max_tokens=1024,\r\n    messages=[{\r\n        "role": "user",\r\n        "content": [\r\n            {\r\n                "type": "image",\r\n                "source": {\r\n                    "type": "base64",\r\n                    "media_type": "image/jpeg",\r\n                    "data": image_data\r\n                }\r\n            },\r\n            {\r\n                "type": "text",\r\n                "text": "What objects do you see in this image?"\r\n            }\r\n        ]\r\n    }]\r\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"streaming-responses",children:"Streaming Responses"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Stream for real-time output\r\nwith client.messages.stream(\r\n    model="claude-3-5-sonnet-20241022",\r\n    max_tokens=1024,\r\n    messages=[{"role": "user", "content": "Explain SLAM"}]\r\n) as stream:\r\n    for text in stream.text_stream:\r\n        print(text, end="", flush=True)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"rate-limits--best-practices",children:"Rate Limits & Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rate Limits"}),": Tier-based (starts at 50 RPM)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Best Practices"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use prompt caching for repeated system prompts"}),"\n",(0,s.jsx)(n.li,{children:"Batch requests when possible"}),"\n",(0,s.jsx)(n.li,{children:"Implement exponential backoff"}),"\n",(0,s.jsx)(n.li,{children:"Monitor token usage"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from tenacity import retry, stop_after_attempt, wait_exponential\r\n\r\n@retry(\r\n    stop=stop_after_attempt(3),\r\n    wait=wait_exponential(multiplier=1, min=2, max=10)\r\n)\r\ndef call_claude_with_retry(prompt):\r\n    return client.messages.create(\r\n        model="claude-3-5-sonnet-20241022",\r\n        max_tokens=1024,\r\n        messages=[{"role": "user", "content": prompt}]\r\n    )\n'})}),"\n",(0,s.jsx)(n.h2,{id:"openai-api",children:"OpenAI API"}),"\n",(0,s.jsx)(n.h3,{id:"embeddings-for-rag",children:"Embeddings for RAG"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\r\n\r\nclient = OpenAI(api_key=os.environ.get("OPENAI_API_KEY"))\r\n\r\n# Generate embeddings\r\nresponse = client.embeddings.create(\r\n    model="text-embedding-3-small",\r\n    input=["ROS 2 is a middleware framework", "Gazebo simulates robots"]\r\n)\r\n\r\nembeddings = [item.embedding for item in response.data]\r\n# Shape: (2, 1536)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"model-options",children:"Model Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Model"}),(0,s.jsx)(n.th,{children:"Dimensions"}),(0,s.jsx)(n.th,{children:"Cost per 1M tokens"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"text-embedding-3-small"}),(0,s.jsx)(n.td,{children:"1536"}),(0,s.jsx)(n.td,{children:"$0.02"}),(0,s.jsx)(n.td,{children:"Production (recommended)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"text-embedding-3-large"}),(0,s.jsx)(n.td,{children:"3072"}),(0,s.jsx)(n.td,{children:"$0.13"}),(0,s.jsx)(n.td,{children:"Higher quality needed"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"text-embedding-ada-002"}),(0,s.jsx)(n.td,{children:"1536"}),(0,s.jsx)(n.td,{children:"$0.10"}),(0,s.jsx)(n.td,{children:"Legacy"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"batch-processing",children:"Batch Processing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Process multiple texts\r\ntexts = ["text1", "text2", "text3", ...]  # Up to 2048 texts\r\n\r\nresponse = client.embeddings.create(\r\n    model="text-embedding-3-small",\r\n    input=texts\r\n)\r\n\r\nembeddings = [item.embedding for item in response.data]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from openai import OpenAIError, RateLimitError\r\n\r\ntry:\r\n    response = client.embeddings.create(\r\n        model="text-embedding-3-small",\r\n        input=text\r\n    )\r\nexcept RateLimitError:\r\n    # Wait and retry\r\n    time.sleep(60)\r\n    response = client.embeddings.create(...)\r\nexcept OpenAIError as e:\r\n    print(f"API error: {e}")\n'})}),"\n",(0,s.jsx)(n.h2,{id:"qdrant-vector-database",children:"Qdrant Vector Database"}),"\n",(0,s.jsx)(n.h3,{id:"initialization",children:"Initialization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from qdrant_client import QdrantClient\r\nfrom qdrant_client.models import Distance, VectorParams\r\n\r\nclient = QdrantClient(\r\n    url=os.getenv("QDRANT_URL"),\r\n    api_key=os.getenv("QDRANT_API_KEY")\r\n)\r\n\r\n# Create collection\r\nclient.create_collection(\r\n    collection_name="my_collection",\r\n    vectors_config=VectorParams(\r\n        size=1536,  # Must match embedding dimension\r\n        distance=Distance.COSINE\r\n    )\r\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"inserting-vectors",children:"Inserting Vectors"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from qdrant_client.models import PointStruct\r\n\r\n# Insert points\r\nclient.upsert(\r\n    collection_name="my_collection",\r\n    points=[\r\n        PointStruct(\r\n            id=1,\r\n            vector=[0.1, 0.2, ...],  # 1536 dimensions\r\n            payload={\r\n                "text": "Original text",\r\n                "metadata": {"module": "01", "chapter": "02"}\r\n            }\r\n        ),\r\n        PointStruct(id=2, vector=[...], payload={...})\r\n    ]\r\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"searching",children:"Searching"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Basic search\r\nresults = client.search(\r\n    collection_name="my_collection",\r\n    query_vector=[0.15, 0.25, ...],  # Query embedding\r\n    limit=5\r\n)\r\n\r\nfor result in results:\r\n    print(f"Score: {result.score}")\r\n    print(f"Text: {result.payload[\'text\']}")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"filtered-search",children:"Filtered Search"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from qdrant_client.models import Filter, FieldCondition, MatchValue\r\n\r\n# Search with filter\r\nresults = client.search(\r\n    collection_name="my_collection",\r\n    query_vector=query_embedding,\r\n    query_filter=Filter(\r\n        must=[\r\n            FieldCondition(\r\n                key="metadata.module",\r\n                match=MatchValue(value="01")\r\n            )\r\n        ]\r\n    ),\r\n    limit=5\r\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"batch-operations",children:"Batch Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Batch upsert\r\npoints = [\r\n    PointStruct(id=i, vector=embeddings[i], payload=payloads[i])\r\n    for i in range(len(embeddings))\r\n]\r\n\r\nclient.upsert(\r\n    collection_name="my_collection",\r\n    points=points,\r\n    wait=True  # Wait for operation to complete\r\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"neon-postgresql",children:"Neon PostgreSQL"}),"\n",(0,s.jsx)(n.h3,{id:"connection",children:"Connection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import psycopg2\r\nfrom psycopg2.pool import SimpleConnectionPool\r\n\r\n# Connection string\r\nDATABASE_URL = os.getenv("DATABASE_URL")\r\n\r\n# Single connection\r\nconn = psycopg2.connect(DATABASE_URL)\r\ncur = conn.cursor()\r\n\r\n# Connection pool (production)\r\npool = SimpleConnectionPool(\r\n    minconn=1,\r\n    maxconn=10,\r\n    dsn=DATABASE_URL\r\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"basic-operations",children:"Basic Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Insert\r\ncur.execute(\r\n    "INSERT INTO documents (title, url) VALUES (%s, %s)",\r\n    ("ROS 2 Guide", "/docs/ros2")\r\n)\r\nconn.commit()\r\n\r\n# Query\r\ncur.execute("SELECT * FROM documents WHERE module = %s", ("01",))\r\nrows = cur.fetchall()\r\n\r\n# Update\r\ncur.execute(\r\n    "UPDATE documents SET updated_at = NOW() WHERE id = %s",\r\n    (doc_id,)\r\n)\r\nconn.commit()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"transactions",children:"Transactions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'try:\r\n    cur.execute("BEGIN")\r\n\r\n    cur.execute("INSERT INTO sessions (id) VALUES (%s)", (session_id,))\r\n    cur.execute("INSERT INTO messages (session_id, content) VALUES (%s, %s)",\r\n                (session_id, message))\r\n\r\n    conn.commit()\r\nexcept Exception as e:\r\n    conn.rollback()\r\n    print(f"Transaction failed: {e}")\n'})}),"\n",(0,s.jsx)(n.h3,{id:"prepared-statements",children:"Prepared Statements"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# More efficient for repeated queries\r\ncur.execute("PREPARE insert_msg AS INSERT INTO messages (session_id, content) VALUES ($1, $2)")\r\n\r\n# Execute prepared statement\r\nfor msg in messages:\r\n    cur.execute("EXECUTE insert_msg (%s, %s)", (session_id, msg))\r\n\r\nconn.commit()\n'})}),"\n",(0,s.jsx)(n.h2,{id:"complete-rag-pipeline-example",children:"Complete RAG Pipeline Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\r\nfrom qdrant_client import QdrantClient\r\nimport anthropic\r\nimport psycopg2\r\n\r\nclass RAGPipeline:\r\n    def __init__(self):\r\n        self.openai = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))\r\n        self.qdrant = QdrantClient(\r\n            url=os.getenv("QDRANT_URL"),\r\n            api_key=os.getenv("QDRANT_API_KEY")\r\n        )\r\n        self.claude = anthropic.Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))\r\n        self.db = psycopg2.connect(os.getenv("DATABASE_URL"))\r\n\r\n    def query(self, user_question: str, session_id: str = None):\r\n        """Process RAG query."""\r\n\r\n        # 1. Generate query embedding\r\n        response = self.openai.embeddings.create(\r\n            model="text-embedding-3-small",\r\n            input=user_question\r\n        )\r\n        query_embedding = response.data[0].embedding\r\n\r\n        # 2. Search vector database\r\n        results = self.qdrant.search(\r\n            collection_name="course_docs",\r\n            query_vector=query_embedding,\r\n            limit=5\r\n        )\r\n\r\n        # 3. Format context\r\n        context = "\\n\\n".join([\r\n            f"[Source {i+1}] {r.payload[\'title\']}\\n{r.payload[\'text\']}"\r\n            for i, r in enumerate(results)\r\n        ])\r\n\r\n        # 4. Generate response with Claude\r\n        message = self.claude.messages.create(\r\n            model="claude-3-5-sonnet-20241022",\r\n            max_tokens=2048,\r\n            system=f"You are a helpful assistant. Use this context:\\n\\n{context}",\r\n            messages=[{"role": "user", "content": user_question}]\r\n        )\r\n\r\n        answer = message.content[0].text\r\n\r\n        # 5. Log to database\r\n        cur = self.db.cursor()\r\n        cur.execute(\r\n            """\r\n            INSERT INTO query_analytics (session_id, query, contexts_retrieved, tokens_used)\r\n            VALUES (%s, %s, %s, %s)\r\n            """,\r\n            (session_id, user_question, len(results), message.usage.total_tokens)\r\n        )\r\n        self.db.commit()\r\n        cur.close()\r\n\r\n        return {\r\n            \'answer\': answer,\r\n            \'sources\': [r.payload for r in results],\r\n            \'tokens_used\': message.usage.total_tokens\r\n        }\r\n\r\n# Usage\r\nrag = RAGPipeline()\r\nresult = rag.query("How do I create a ROS 2 package?")\r\nprint(result[\'answer\'])\n'})}),"\n",(0,s.jsx)(n.h2,{id:"cost-estimation",children:"Cost Estimation"}),"\n",(0,s.jsx)(n.h3,{id:"example-usage-1000-queriesday",children:"Example Usage (1000 queries/day)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Embeddings (OpenAI):\r\n- Query: 1000 * 50 tokens = 50K tokens\r\n- Documents: 1000 * 5 * 500 tokens = 2.5M tokens\r\n- Cost: (50K + 2.5M) / 1M * $0.02 = $0.051/day\r\n\r\nLLM (Claude 3.5 Sonnet):\r\n- Input: 1000 * (2000 context + 50 query) = 2.05M tokens\r\n- Output: 1000 * 500 tokens = 500K tokens\r\n- Cost: (2.05M / 1M * $3) + (500K / 1M * $15) = $13.65/day\r\n\r\nQdrant Cloud:\r\n- 1GB cluster: ~$25/month = $0.83/day\r\n\r\nNeon PostgreSQL:\r\n- Scale tier: $19/month = $0.63/day\r\n\r\nTotal: ~$15.15/day or $455/month\n"})}),"\n",(0,s.jsx)(n.h2,{id:"rate-limiting-strategies",children:"Rate Limiting Strategies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from redis import Redis\r\nimport time\r\n\r\nclass RateLimiter:\r\n    def __init__(self, redis_url="redis://localhost:6379"):\r\n        self.redis = Redis.from_url(redis_url)\r\n\r\n    def check_limit(self, user_id: str, limit: int = 10, window: int = 60):\r\n        """Check if user exceeded rate limit."""\r\n        key = f"ratelimit:{user_id}"\r\n        count = self.redis.incr(key)\r\n\r\n        if count == 1:\r\n            self.redis.expire(key, window)\r\n\r\n        if count > limit:\r\n            ttl = self.redis.ttl(key)\r\n            raise Exception(f"Rate limit exceeded. Try again in {ttl}s")\r\n\r\n        return count\r\n\r\n# Usage\r\nlimiter = RateLimiter()\r\ntry:\r\n    limiter.check_limit(user_id="user123", limit=10, window=60)\r\n    # Process request\r\nexcept Exception as e:\r\n    return {"error": str(e)}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Keys"}),": Never commit to git, use environment variables"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Input Validation"}),": Sanitize user inputs before API calls"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rate Limiting"}),": Prevent abuse and cost overruns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Logging"}),": Log all API calls for debugging and auditing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Handling"}),": Never expose API errors to end users"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.anthropic.com/",children:"Anthropic API Docs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://platform.openai.com/docs/",children:"OpenAI API Docs"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://qdrant.tech/documentation/",children:"Qdrant Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://neon.tech/docs",children:"Neon PostgreSQL"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(6540);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);