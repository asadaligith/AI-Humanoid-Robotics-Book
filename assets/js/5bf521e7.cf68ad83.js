"use strict";(self.webpackChunkai_humanoid_robotics_book=self.webpackChunkai_humanoid_robotics_book||[]).push([[7314],{5418:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"rag-chatbot/deployment","title":"RAG Chatbot Deployment Guide","description":"Overview","source":"@site/docs/rag-chatbot/deployment.md","sourceDirName":"rag-chatbot","slug":"/rag-chatbot/deployment","permalink":"/AI-Humanoid-Robotics-Book/docs/rag-chatbot/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/asadaligith/AI-Humanoid-Robotics-Book/tree/main/docs/rag-chatbot/deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"RAG Chatbot Setup Guide","permalink":"/AI-Humanoid-Robotics-Book/docs/rag-chatbot/setup"},"next":{"title":"API Integration Reference","permalink":"/AI-Humanoid-Robotics-Book/docs/integrations/api-reference"}}');var i=t(4848),s=t(8453);const o={},a="RAG Chatbot Deployment Guide",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Deployment Options",id:"deployment-options",level:2},{value:"Option 1: Cloud Platform (Recommended)",id:"option-1-cloud-platform-recommended",level:3},{value:"Option 2: Self-Hosted",id:"option-2-self-hosted",level:3},{value:"Option 3: Serverless",id:"option-3-serverless",level:3},{value:"Production Deployment (Railway)",id:"production-deployment-railway",level:2},{value:"Step 1: Prepare Application",id:"step-1-prepare-application",level:3},{value:"Step 2: Environment Variables",id:"step-2-environment-variables",level:3},{value:"Step 3: Deploy",id:"step-3-deploy",level:3},{value:"Docker Production Deployment",id:"docker-production-deployment",level:2},{value:"Multi-Stage Dockerfile",id:"multi-stage-dockerfile",level:3},{value:"Docker Compose for Production",id:"docker-compose-for-production",level:3},{value:"Nginx Configuration",id:"nginx-configuration",level:3},{value:"CI/CD with GitHub Actions",id:"cicd-with-github-actions",level:2},{value:"Monitoring &amp; Logging",id:"monitoring--logging",level:2},{value:"Application Logging",id:"application-logging",level:3},{value:"Sentry Integration",id:"sentry-integration",level:3},{value:"Prometheus Metrics",id:"prometheus-metrics",level:3},{value:"Scaling Strategies",id:"scaling-strategies",level:2},{value:"Horizontal Scaling",id:"horizontal-scaling",level:3},{value:"Load Balancing",id:"load-balancing",level:3},{value:"Caching Layer",id:"caching-layer",level:3},{value:"Security Hardening",id:"security-hardening",level:2},{value:"API Key Rotation",id:"api-key-rotation",level:3},{value:"Input Sanitization",id:"input-sanitization",level:3},{value:"Backup &amp; Recovery",id:"backup--recovery",level:2},{value:"Database Backups",id:"database-backups",level:3},{value:"Vector Database Backup",id:"vector-database-backup",level:3},{value:"Cost Optimization",id:"cost-optimization",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"High Latency",id:"high-latency",level:3},{value:"Memory Leaks",id:"memory-leaks",level:3},{value:"Database Connection Issues",id:"database-connection-issues",level:3},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"rag-chatbot-deployment-guide",children:"RAG Chatbot Deployment Guide"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This guide covers deploying the RAG chatbot to production using Docker, cloud services, and CI/CD automation."}),"\n",(0,i.jsx)(n.h2,{id:"deployment-options",children:"Deployment Options"}),"\n",(0,i.jsx)(n.h3,{id:"option-1-cloud-platform-recommended",children:"Option 1: Cloud Platform (Recommended)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API"}),": Railway, Render, or Fly.io"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database"}),": Neon PostgreSQL (serverless)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vector DB"}),": Qdrant Cloud"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CDN"}),": Cloudflare (for static site)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"option-2-self-hosted",children:"Option 2: Self-Hosted"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server"}),": AWS EC2, DigitalOcean, or VPS"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database"}),": Self-hosted PostgreSQL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vector DB"}),": Self-hosted Qdrant"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reverse Proxy"}),": Nginx"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"option-3-serverless",children:"Option 3: Serverless"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Functions"}),": AWS Lambda or Cloudflare Workers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API Gateway"}),": AWS API Gateway"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Database"}),": Neon PostgreSQL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vector DB"}),": Qdrant Cloud"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"production-deployment-railway",children:"Production Deployment (Railway)"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-prepare-application",children:"Step 1: Prepare Application"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"railway.json"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://railway.app/railway.schema.json",\n  "build": {\n    "builder": "NIXPACKS",\n    "buildCommand": "pip install -r requirements.txt"\n  },\n  "deploy": {\n    "startCommand": "uvicorn app.main:app --host 0.0.0.0 --port $PORT",\n    "restartPolicyType": "ON_FAILURE",\n    "restartPolicyMaxRetries": 10\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-environment-variables",children:"Step 2: Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:"Set in Railway dashboard:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ANTHROPIC_API_KEY=sk-ant-...\nOPENAI_API_KEY=sk-...\nQDRANT_URL=https://xxx.qdrant.io:6333\nQDRANT_API_KEY=...\nDATABASE_URL=postgresql://...\nAPP_ENV=production\nLOG_LEVEL=INFO\nALLOWED_ORIGINS=https://yourdomain.com\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-deploy",children:"Step 3: Deploy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install Railway CLI\nnpm install -g @railway/cli\n\n# Login\nrailway login\n\n# Initialize project\nrailway init\n\n# Deploy\nrailway up\n\n# Add custom domain\nrailway domain\n"})}),"\n",(0,i.jsx)(n.h2,{id:"docker-production-deployment",children:"Docker Production Deployment"}),"\n",(0,i.jsx)(n.h3,{id:"multi-stage-dockerfile",children:"Multi-Stage Dockerfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'# Build stage\nFROM python:3.11-slim as builder\n\nWORKDIR /app\n\n# Install build dependencies\nRUN apt-get update && apt-get install -y \\\n    gcc \\\n    postgresql-client \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Install Python dependencies\nCOPY requirements.txt .\nRUN pip install --user --no-cache-dir -r requirements.txt\n\n# Runtime stage\nFROM python:3.11-slim\n\nWORKDIR /app\n\n# Copy Python packages from builder\nCOPY --from=builder /root/.local /root/.local\n\n# Copy application\nCOPY app/ ./app/\n\n# Create non-root user\nRUN useradd -m -u 1000 appuser && \\\n    chown -R appuser:appuser /app\n\nUSER appuser\n\n# Update PATH\nENV PATH=/root/.local/bin:$PATH\n\n# Expose port\nEXPOSE 8000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \\\n  CMD python -c "import requests; requests.get(\'http://localhost:8000/health\')"\n\n# Run application\nCMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000", "--workers", "4"]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"docker-compose-for-production",children:"Docker Compose for Production"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  chatbot-api:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - "8000:8000"\n    environment:\n      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}\n      - OPENAI_API_KEY=${OPENAI_API_KEY}\n      - QDRANT_URL=${QDRANT_URL}\n      - QDRANT_API_KEY=${QDRANT_API_KEY}\n      - DATABASE_URL=${DATABASE_URL}\n      - REDIS_URL=redis://redis:6379/0\n      - APP_ENV=production\n    depends_on:\n      - redis\n    restart: unless-stopped\n    healthcheck:\n      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  redis:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n    restart: unless-stopped\n    healthcheck:\n      test: ["CMD", "redis-cli", "ping"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - chatbot-api\n    restart: unless-stopped\n\nvolumes:\n  redis_data:\n'})}),"\n",(0,i.jsx)(n.h3,{id:"nginx-configuration",children:"Nginx Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:'# nginx.conf\nupstream chatbot_api {\n    server chatbot-api:8000;\n}\n\nserver {\n    listen 80;\n    server_name api.yourdomain.com;\n\n    # Redirect to HTTPS\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name api.yourdomain.com;\n\n    # SSL certificates\n    ssl_certificate /etc/nginx/ssl/fullchain.pem;\n    ssl_certificate_key /etc/nginx/ssl/privkey.pem;\n\n    # SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    # Security headers\n    add_header X-Frame-Options "SAMEORIGIN" always;\n    add_header X-Content-Type-Options "nosniff" always;\n    add_header X-XSS-Protection "1; mode=block" always;\n    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;\n\n    # CORS headers\n    add_header Access-Control-Allow-Origin "https://yourdomain.com" always;\n    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS" always;\n    add_header Access-Control-Allow-Headers "Content-Type, Authorization" always;\n\n    # Rate limiting\n    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=10r/m;\n\n    location / {\n        limit_req zone=api_limit burst=20 nodelay;\n\n        proxy_pass http://chatbot_api;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # Timeouts\n        proxy_connect_timeout 60s;\n        proxy_send_timeout 60s;\n        proxy_read_timeout 60s;\n    }\n\n    location /health {\n        proxy_pass http://chatbot_api/health;\n        access_log off;\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cicd-with-github-actions",children:"CI/CD with GitHub Actions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# .github/workflows/deploy.yml\nname: Deploy to Production\n\non:\n  push:\n    branches: [main]\n  workflow_dispatch:\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v3\n\n      - name: Set up Python\n        uses: actions/setup-python@v4\n        with:\n          python-version: '3.11'\n\n      - name: Install dependencies\n        run: |\n          cd chatbot\n          pip install -r requirements.txt\n          pip install pytest pytest-asyncio\n\n      - name: Run tests\n        run: |\n          cd chatbot\n          pytest tests/\n\n      - name: Build Docker image\n        run: |\n          cd chatbot\n          docker build -t chatbot-api:latest .\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v2\n        with:\n          username: ${{ secrets.DOCKER_USERNAME }}\n          password: ${{ secrets.DOCKER_PASSWORD }}\n\n      - name: Push to Docker Hub\n        run: |\n          docker tag chatbot-api:latest ${{ secrets.DOCKER_USERNAME }}/chatbot-api:latest\n          docker push ${{ secrets.DOCKER_USERNAME }}/chatbot-api:latest\n\n      - name: Deploy to Railway\n        run: |\n          npm install -g @railway/cli\n          railway up --service chatbot-api\n        env:\n          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}\n\n      - name: Run database migrations\n        run: |\n          python chatbot/scripts/migrate_database.py\n        env:\n          DATABASE_URL: ${{ secrets.DATABASE_URL }}\n\n      - name: Ingest latest documentation\n        run: |\n          python chatbot/scripts/ingest_docs.py --docs-path docs\n        env:\n          QDRANT_URL: ${{ secrets.QDRANT_URL }}\n          QDRANT_API_KEY: ${{ secrets.QDRANT_API_KEY }}\n          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}\n          DATABASE_URL: ${{ secrets.DATABASE_URL }}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"monitoring--logging",children:"Monitoring & Logging"}),"\n",(0,i.jsx)(n.h3,{id:"application-logging",children:"Application Logging"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# app/logging_config.py\nimport logging\nfrom logging.handlers import RotatingFileHandler\nimport sys\n\ndef setup_logging(app_env="production"):\n    """Configure application logging."""\n\n    # Create logger\n    logger = logging.getLogger("chatbot")\n    logger.setLevel(logging.INFO if app_env == "production" else logging.DEBUG)\n\n    # Console handler\n    console_handler = logging.StreamHandler(sys.stdout)\n    console_handler.setLevel(logging.INFO)\n\n    # File handler (rotating)\n    file_handler = RotatingFileHandler(\n        "logs/chatbot.log",\n        maxBytes=10 * 1024 * 1024,  # 10MB\n        backupCount=5\n    )\n    file_handler.setLevel(logging.DEBUG)\n\n    # Formatter\n    formatter = logging.Formatter(\n        \'%(asctime)s - %(name)s - %(levelname)s - %(message)s\'\n    )\n    console_handler.setFormatter(formatter)\n    file_handler.setFormatter(formatter)\n\n    # Add handlers\n    logger.addHandler(console_handler)\n    logger.addHandler(file_handler)\n\n    return logger\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sentry-integration",children:"Sentry Integration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import sentry_sdk\nfrom sentry_sdk.integrations.fastapi import FastApiIntegration\n\nsentry_sdk.init(\n    dsn=os.getenv("SENTRY_DSN"),\n    integrations=[FastApiIntegration()],\n    traces_sample_rate=0.1,\n    environment=os.getenv("APP_ENV", "production")\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"prometheus-metrics",children:"Prometheus Metrics"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from prometheus_client import Counter, Histogram, Gauge, generate_latest\nfrom fastapi import Response\n\n# Metrics\nrequest_count = Counter('chatbot_requests_total', 'Total requests')\nrequest_duration = Histogram('chatbot_request_duration_seconds', 'Request duration')\nactive_sessions = Gauge('chatbot_active_sessions', 'Active sessions')\n\n@app.get(\"/metrics\")\nasync def metrics():\n    \"\"\"Prometheus metrics endpoint.\"\"\"\n    return Response(content=generate_latest(), media_type=\"text/plain\")\n"})}),"\n",(0,i.jsx)(n.h2,{id:"scaling-strategies",children:"Scaling Strategies"}),"\n",(0,i.jsx)(n.h3,{id:"horizontal-scaling",children:"Horizontal Scaling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.scale.yml\nservices:\n  chatbot-api:\n    deploy:\n      replicas: 4\n      resources:\n        limits:\n          cpus: '1'\n          memory: 2G\n        reservations:\n          cpus: '0.5'\n          memory: 1G\n"})}),"\n",(0,i.jsx)(n.h3,{id:"load-balancing",children:"Load Balancing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"upstream chatbot_api {\n    least_conn;\n    server chatbot-api-1:8000 weight=1;\n    server chatbot-api-2:8000 weight=1;\n    server chatbot-api-3:8000 weight=1;\n    server chatbot-api-4:8000 weight=1;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"caching-layer",children:"Caching Layer"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import redis\nfrom functools import wraps\nimport json\nimport hashlib\n\nredis_client = redis.Redis.from_url(os.getenv("REDIS_URL"))\n\ndef cache_query(ttl=3600):\n    """Cache query results in Redis."""\n    def decorator(func):\n        @wraps(func)\n        async def wrapper(query: str, *args, **kwargs):\n            # Create cache key\n            cache_key = f"query:{hashlib.sha256(query.encode()).hexdigest()}"\n\n            # Check cache\n            cached = redis_client.get(cache_key)\n            if cached:\n                return json.loads(cached)\n\n            # Execute query\n            result = await func(query, *args, **kwargs)\n\n            # Cache result\n            redis_client.setex(cache_key, ttl, json.dumps(result))\n\n            return result\n        return wrapper\n    return decorator\n'})}),"\n",(0,i.jsx)(n.h2,{id:"security-hardening",children:"Security Hardening"}),"\n",(0,i.jsx)(n.h3,{id:"api-key-rotation",children:"API Key Rotation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Rotate API keys periodically\nimport boto3\n\ndef rotate_api_keys():\n    """Rotate API keys stored in AWS Secrets Manager."""\n    secrets = boto3.client(\'secretsmanager\')\n\n    # Generate new keys\n    # Update in Secrets Manager\n    # Update in application config\n    # Revoke old keys\n'})}),"\n",(0,i.jsx)(n.h3,{id:"input-sanitization",children:"Input Sanitization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from fastapi import HTTPException\nimport re\n\ndef sanitize_query(query: str) -> str:\n    \"\"\"Sanitize user query.\"\"\"\n    # Remove control characters\n    query = re.sub(r'[\\x00-\\x1f\\x7f-\\x9f]', '', query)\n\n    # Limit length\n    if len(query) > 1000:\n        raise HTTPException(status_code=400, detail=\"Query too long\")\n\n    # Check for injection attempts\n    dangerous_patterns = [\n        r'<script',\n        r'javascript:',\n        r'onerror=',\n        r'onclick='\n    ]\n\n    for pattern in dangerous_patterns:\n        if re.search(pattern, query, re.IGNORECASE):\n            raise HTTPException(status_code=400, detail=\"Invalid query\")\n\n    return query.strip()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"backup--recovery",children:"Backup & Recovery"}),"\n",(0,i.jsx)(n.h3,{id:"database-backups",children:"Database Backups"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Automated daily backups\n#!/bin/bash\n# backup.sh\n\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_DIR="/backups"\nDATABASE_URL="postgresql://..."\n\n# Backup PostgreSQL\npg_dump "$DATABASE_URL" | gzip > "$BACKUP_DIR/db_$DATE.sql.gz"\n\n# Upload to S3\naws s3 cp "$BACKUP_DIR/db_$DATE.sql.gz" s3://my-backups/chatbot/\n\n# Keep only last 30 days\nfind "$BACKUP_DIR" -name "db_*.sql.gz" -mtime +30 -delete\n'})}),"\n",(0,i.jsx)(n.h3,{id:"vector-database-backup",children:"Vector Database Backup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# Export Qdrant snapshot\nfrom qdrant_client import QdrantClient\n\nclient = QdrantClient(url=QDRANT_URL, api_key=QDRANT_API_KEY)\n\n# Create snapshot\nclient.create_snapshot(collection_name="course_docs")\n\n# Download snapshot\n# Upload to cloud storage\n'})}),"\n",(0,i.jsx)(n.h2,{id:"cost-optimization",children:"Cost Optimization"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Connection Pooling"}),": Reduce database connections"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache Frequent Queries"}),": Redis for hot data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Embeddings"}),": Group API calls"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Right-Size Instances"}),": Monitor and adjust resources"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Spot Instances"}),": For non-critical workloads"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"high-latency",children:"High Latency"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check database query performance\nEXPLAIN ANALYZE SELECT * FROM documents WHERE module = '01';\n\n# Add missing indexes\nCREATE INDEX idx_documents_module ON documents(module);\n\n# Monitor API response times\ntail -f logs/chatbot.log | grep \"response_time\"\n"})}),"\n",(0,i.jsx)(n.h3,{id:"memory-leaks",children:"Memory Leaks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Use memory profiler\nfrom memory_profiler import profile\n\n@profile\ndef process_query(query):\n    # Your code here\n    pass\n"})}),"\n",(0,i.jsx)(n.h3,{id:"database-connection-issues",children:"Database Connection Issues"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# Implement connection retry\nfrom tenacity import retry, stop_after_attempt, wait_fixed\n\n@retry(stop=stop_after_attempt(3), wait=wait_fixed(2))\ndef get_db_connection():\n    return psycopg2.connect(DATABASE_URL)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.railway.app/",children:"Railway Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.docker.com/develop/dev-best-practices/",children:"Docker Best Practices"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.nginx.com/resources/wiki/",children:"Nginx Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://fastapi.tiangolo.com/deployment/",children:"FastAPI Deployment"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(6540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);